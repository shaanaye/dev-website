<!DOCTYPE html>
<html>
  <link rel="stylesheet" href="styles.css">
  <body style="background-color: #36454F;">
    <script type="application/javascript">
      function getIP() {
        var button = document.getElementById("getIPButton");
        button.classList.add("loading");
        button.disabled = true;
        button.innerHTML = "";
        

        fetch('https://api.ipify.org?format=json')
          .then(response => response.json())
          .then(data => {
            var ip = data.ip;
            document.getElementById("ip").innerHTML = ip;

            return fetch('https://api.ipgeolocation.io/ipgeo?apiKey=1c67e9644f6743a3aa65bab9bc530eb6&ip='+ip)
          })
          .then(response => response.json())
          .then(data=>{
            var country = data.country_name;
            var state = data.state_prov;
            document.getElementById("country_name").innerHTML = country;
            document.getElementById("state").innerHTML = state;

            button.classList.remove("loading");
            button.disabled = false;
            button.innerHTML = "Get IP";
          })
          .catch(error => console.log(error));
      }
    </script>
    <div class="buttoncontainer">
      <button id="getIPButton" class="button" onclick="getIP()">Get IP</button>
    </div>
    <p id="ip"></p>
    <p id="country_name"></p>
    <p id="state"></p>
  </body>
</html>

<!-- Google tag (gtag.js) -->
<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-MG2R7Q69TP"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-MG2R7Q69TP');
</script> -->
